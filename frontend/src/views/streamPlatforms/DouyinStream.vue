<template>
    <div class="page-container">
        <!-- èƒŒæ™¯è£…é¥° -->
        <div class="bg-decoration">
            <div class="floating-shape shape-1"></div>
            <div class="floating-shape shape-2"></div>
            <div class="floating-shape shape-3"></div>
            <div class="floating-shape shape-4"></div>
        </div>

        <div class="main-container">
            <!-- é¡¶éƒ¨å¯¼èˆªæ  -->
            <nav class="top-nav">
                <div class="nav-brand">
                    <div class="logo-container">
                        <svg width="40" height="39" fill="none" xmlns="http://www.w3.org/2000/svg" class="douyin-logo">
                            <path d="M6 14a8 8 0 0 1 8-8h20a8 8 0 0 1 8 8v20a8 8 0 0 1-8 8H14a8 8 0 0 1-8-8V14Z" fill="#000"/>
                            <path fill-rule="evenodd" clip-rule="evenodd" d="M35 17a6 6 0 0 1-6-6h-5v18.5a3.5 3.5 0 1 1-3.5-3.5H22v-5h-1.5a8.5 8.5 0 1 0 8.5 8.5v-9.279A10.948 10.948 0 0 0 35 22h.5v-5H35Z" fill="#FA1E5C"/>
                            <path fill-rule="evenodd" clip-rule="evenodd" d="M34 16a6 6 0 0 1-6-6h-5v18.5a3.5 3.5 0 1 1-3.5-3.5H21v-5h-1.5a8.5 8.5 0 1 0 8.5 8.5v-9.279A10.948 10.948 0 0 0 34 21h.5v-5H34Z" fill="#5FFDFF"/>
                            <path fill-rule="evenodd" clip-rule="evenodd" d="M34.5 16.98a5.992 5.992 0 0 1-4.213-2.267A5.996 5.996 0 0 1 28.083 11H24v18.5a3.5 3.5 0 0 1-6.424 1.924A3.5 3.5 0 0 1 19.5 25H21v-4h-.5a8.5 8.5 0 0 0-6.49 13.99A8.5 8.5 0 0 0 28 28.5v-9.279A10.948 10.948 0 0 0 34 21h.5v-4.02Z" fill="#fff"/>
                        </svg>
                    </div>
                    <div class="brand-text">
                        <h1 class="brand-title">æŠ–éŸ³ç›´æ’­æ¨æµå·¥å…·</h1>
                        <p class="brand-subtitle">ä¸“ä¸šçš„ç›´æ’­æ¨æµç è·å–ä¸ç®¡ç†å¹³å°</p>
                    </div>
                </div>
                <div class="nav-actions">
                    <button class="nav-btn" @click="showHelp">
                        <span class="nav-btn-icon">ğŸ“–</span>
                        å¸®åŠ©
                    </button>
                    <button class="nav-btn" @click="showQuickActions = !showQuickActions">
                        <span class="nav-btn-icon">âš¡</span>
                        å¿«æ·æ“ä½œ
                    </button>
                    <button class="nav-btn" @click="startTutorial">
                        <span class="nav-btn-icon">ğŸ“</span>
                        æ•™ç¨‹
                    </button>
                    <button class="nav-btn" @click="resetTutorial" title="é‡ç½®æ•™ç¨‹çŠ¶æ€">
                        <span class="nav-btn-icon">ğŸ”„</span>
                        é‡ç½®æ•™ç¨‹
                    </button>
                </div>
            </nav>

            <!-- æ ‡ç­¾é¡µå¯¼èˆª -->
            <div class="tab-navigation">
                <div class="tab-list">
                    <button v-for="tab in tabs" :key="tab.id" 
                        :class="['tab-item', { active: currentTab === tab.id }]"
                        @click="currentTab = tab.id">
                        <div class="tab-content">
                            <span class="tab-icon">{{ tab.icon }}</span>
                            <div class="tab-info">
                                <span class="tab-name">{{ tab.name }}</span>
                                <span class="tab-desc">{{ tab.description }}</span>
                            </div>
                        </div>
                    </button>
                </div>
            </div>

            <!-- ä¸»å†…å®¹åŒºåŸŸ -->
            <main class="main-content">
                <!-- è´¦å·è®¾ç½® Tab -->
                <div v-if="currentTab === 'account'" class="content-panel">
                    <div class="panel-header">
                        <h2 class="panel-title">
                            <span class="title-icon">ğŸ”</span>
                            è´¦å·è®¾ç½®
                        </h2>
                        <p class="panel-subtitle">é…ç½®æ‚¨çš„æŠ–éŸ³è´¦å·ä¿¡æ¯ï¼Œæ”¯æŒå¤šç§ç™»å½•æ–¹å¼</p>
                    </div>

                    <div class="panel-grid">
                        <!-- Cookiesæ–‡ä»¶å¯¼å…¥ -->
                        <div class="feature-card">
                            <div class="card-header">
                                <div class="card-icon">ğŸ“‚</div>
                                <h3>Cookiesæ–‡ä»¶å¯¼å…¥</h3>
                            </div>
                            <p class="card-desc">ä»æœ¬åœ°æ–‡ä»¶å¯¼å…¥Cookiesä¿¡æ¯</p>
                            <button class="card-btn primary" @click="loadCookiesFile">
                                <span class="btn-icon">ğŸ“‚</span>
                                é€‰æ‹©æ–‡ä»¶
                            </button>
                        </div>

                        <!-- è‡ªåŠ¨è·å– -->
                        <div class="feature-card">
                            <div class="card-header">
                                <div class="card-icon">ğŸ”</div>
                                <h3>è‡ªåŠ¨è·å–</h3>
                            </div>
                            <p class="card-desc">é€šè¿‡æ‰«ç è‡ªåŠ¨è·å–è´¦å·ä¿¡æ¯</p>
                            <button class="card-btn success" @click="autoGetAccount" :disabled="autoGetLoading">
                                <span class="btn-icon">{{ autoGetLoading ? 'â³' : 'ğŸ”' }}</span>
                                {{ autoGetLoading ? 'è·å–ä¸­...' : 'å¼€å§‹è·å–' }}
                            </button>
                            <div v-if="autoGetLoading" class="loading-indicator">
                                <div class="spinner"></div>
                                <span>æ­£åœ¨è·å–è´¦å·ä¿¡æ¯...</span>
                            </div>
                        </div>
                    </div>

                    <!-- æ‰‹åŠ¨è¾“å…¥è¡¨å• -->
                    <div class="form-section">
                        <div class="section-header">
                            <h3>æ‰‹åŠ¨è¾“å…¥</h3>
                            <p>å¦‚æœæ‚¨å·²æœ‰è´¦å·ä¿¡æ¯ï¼Œå¯ä»¥ç›´æ¥è¾“å…¥</p>
                        </div>
                        
                        <div class="form-grid">
                            <div class="form-field">
                                <label class="field-label">æˆ¿é—´ID</label>
                                <input type="password" v-model="accountInfo.room_id" 
                                    class="field-input" placeholder="è¯·è¾“å…¥æˆ¿é—´ID" />
                            </div>
                            
                            <div class="form-field">
                                <label class="field-label">Cookies</label>
                                <input type="password" v-model="accountInfo.cookie_str" 
                                    class="field-input" placeholder="è¯·è¾“å…¥Cookieså­—ç¬¦ä¸²" />
                            </div>
                            
                            <div class="form-field">
                                <label class="field-label">Session ID</label>
                                <input type="password" v-model="accountInfo.session_id" 
                                    class="field-input" placeholder="è¯·è¾“å…¥Session ID" />
                            </div>
                        </div>

                        <div class="form-actions">
                            <button class="action-btn primary" @click="saveAccountSettings">
                                <span class="btn-icon">ğŸ’¾</span>
                                ä¿å­˜è®¾ç½®
                            </button>
                        </div>
                    </div>
                </div>

                <!-- ç›´æ’­è®¾ç½® Tab -->
                <div v-if="currentTab === 'live'" class="content-panel">
                    <div class="panel-header">
                        <h2 class="panel-title">
                            <span class="title-icon">ğŸ“¡</span>
                            ç›´æ’­è®¾ç½®
                        </h2>
                        <p class="panel-subtitle">é…ç½®ç›´æ’­æ ‡é¢˜ã€åˆ†ç±»å’Œäº’åŠ¨åŠŸèƒ½</p>
                    </div>

                    <!-- ç›´æ’­æ ‡é¢˜è®¾ç½® -->
                    <div class="setting-section">
                        <div class="section-header">
                            <h3>ç›´æ’­æ ‡é¢˜</h3>
                            <p>è®¾ç½®æ‚¨çš„ç›´æ’­æ ‡é¢˜</p>
                        </div>
                        <div class="input-group">
                            <input type="text" v-model="liveSettings.live_title" 
                                class="modern-input" placeholder="è¾“å…¥ç›´æ’­æ ‡é¢˜" />
                            <button class="action-btn primary" @click="updateTitle">
                                <span class="btn-icon">ğŸ”„</span>
                                æ›´æ–°æ ‡é¢˜
                            </button>
                        </div>
                    </div>

                    <!-- ç›´æ’­åˆ†ç±»è®¾ç½® -->
                    <div class="setting-section">
                        <div class="section-header">
                            <h3>ç›´æ’­åˆ†ç±»</h3>
                            <p>é€‰æ‹©é€‚åˆçš„ç›´æ’­åˆ†ç±»</p>
                        </div>
                        <div class="category-grid">
                            <div class="select-group">
                                <label class="select-label">ä¸»åˆ†ç±»</label>
                                <select v-model="liveSettings.selected_category" @change="updateSubCategories" class="modern-select">
                                    <option value="">è¯·é€‰æ‹©åˆ†ç±»</option>
                                    <option v-for="category in mainCategories" :key="category" :value="category">{{ category }}</option>
                                </select>
                            </div>
                            <div class="select-group">
                                <label class="select-label">å­åˆ†ç±»</label>
                                <select v-model="liveSettings.selected_sub_category" class="modern-select">
                                    <option value="">è¯·é€‰æ‹©å­åˆ†ç±»</option>
                                    <option v-for="subCategory in subCategories" :key="subCategory" :value="subCategory">{{ subCategory }}</option>
                                </select>
                            </div>
                        </div>
                        <div class="action-group">
                            <button class="action-btn primary" @click="updateCategory">
                                <span class="btn-icon">âœ…</span>
                                æ›´æ–°åˆ†ç±»
                            </button>
                            <button class="action-btn secondary" @click="refreshCategories">
                                <span class="btn-icon">ğŸ”„</span>
                                åˆ·æ–°åˆ†ç±»
                            </button>
                        </div>
                    </div>

                    <!-- è¯„è®ºå‘é€ -->
                    <div class="setting-section">
                        <div class="section-header">
                            <h3>å‘é€è¯„è®º</h3>
                            <p>ä¸è§‚ä¼—äº’åŠ¨</p>
                        </div>
                        <div class="input-group">
                            <input type="text" v-model="commentMessage" 
                                class="modern-input" placeholder="è¾“å…¥è¯„è®ºå†…å®¹" />
                            <button class="action-btn success" @click="sendComment">
                                <span class="btn-icon">ğŸ“¤</span>
                                å‘é€è¯„è®º
                            </button>
                        </div>
                    </div>

                    <!-- å¼€å§‹ç›´æ’­æŒ‰é’® -->
                    <div class="live-action">
                        <button class="live-btn" @click="startLiveAndRedirect">
                            <span class="live-icon">ğŸ¬</span>
                            <span class="live-text">å¼€å§‹ç›´æ’­</span>
                        </button>
                    </div>

                    <!-- æ“ä½œæ—¥å¿— -->
                    <div class="log-section">
                        <div class="section-header">
                            <h3>æ“ä½œæ—¥å¿—</h3>
                            <div class="log-actions">
                                <button class="action-btn small secondary" @click="clearLogs">
                                    <span class="btn-icon">ğŸ—‘ï¸</span>
                                    æ¸…ç©º
                                </button>
                                <button class="action-btn small secondary" @click="exportLogs">
                                    <span class="btn-icon">ğŸ“„</span>
                                    å¯¼å‡º
                                </button>
                            </div>
                        </div>
                        <div class="log-container">
                            <div v-for="(log, index) in logs" :key="index" :class="['log-item', `log-${log.type}`]">
                                <span class="log-time">{{ log.timeString }}</span>
                                <span class="log-icon">{{ getLogIcon(log.type) }}</span>
                                <span class="log-message">{{ log.message }}</span>
                            </div>
                            <div v-if="logs.length === 0" class="empty-log">
                                <span class="empty-icon">ğŸ“</span>
                                <span>æš‚æ— æ“ä½œæ—¥å¿—</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- æ¨æµä¿¡æ¯ Tab -->
                <div v-if="currentTab === 'stream'" class="content-panel">
                    <div class="panel-header">
                        <h2 class="panel-title">
                            <span class="title-icon">ğŸ“Š</span>
                            æ¨æµä¿¡æ¯
                        </h2>
                        <p class="panel-subtitle">è·å–å’Œç®¡ç†æ‚¨çš„ç›´æ’­æ¨æµä¿¡æ¯</p>
                    </div>

                    <!-- æ¨æµä¿¡æ¯å±•ç¤º -->
                    <div class="stream-info-section">
                        <div class="info-card">
                            <div class="card-header">
                                <h3>æ¨æµåœ°å€</h3>
                                <button class="copy-btn" @click="copyServer">
                                    <span class="btn-icon">ğŸ“‹</span>
                                    å¤åˆ¶
                                </button>
                            </div>
                            <div class="info-value">{{ streamInfo.server || 'æš‚æ— æ¨æµåœ°å€' }}</div>
                        </div>

                        <div class="info-card">
                            <div class="card-header">
                                <h3>æ¨æµå¯†é’¥</h3>
                                <button class="copy-btn" @click="copyCode">
                                    <span class="btn-icon">ğŸ“‹</span>
                                    å¤åˆ¶
                                </button>
                            </div>
                            <div class="info-value">{{ streamInfo.code || 'æš‚æ— æ¨æµå¯†é’¥' }}</div>
                        </div>
                    </div>

                    <!-- å¯¼å‡ºé€‰é¡¹ -->
                    <div class="export-section">
                        <div class="section-header">
                            <h3>å¯¼å‡ºé€‰é¡¹</h3>
                            <p>å°†æ¨æµä¿¡æ¯ä¿å­˜åˆ°æœ¬åœ°</p>
                        </div>
                        <div class="export-actions">
                            <button class="action-btn secondary" @click="exportToDesktop">
                                <span class="btn-icon">ğŸ’¾</span>
                                å¯¼å‡ºåˆ°æ¡Œé¢
                            </button>
                            <button class="action-btn secondary" @click="exportToFile">
                                <span class="btn-icon">ğŸ“„</span>
                                å¯¼å‡ºåˆ°æ–‡ä»¶
                            </button>
                        </div>
                    </div>

                    <!-- ç›´æ’­æ§åˆ¶ -->
                    <div class="control-section">
                        <div class="section-header">
                            <h3>ç›´æ’­æ§åˆ¶</h3>
                            <p>ç®¡ç†ç›´æ’­çŠ¶æ€</p>
                        </div>
                        <div class="control-actions">
                            <button class="action-btn danger" @click="stopLive">
                                <span class="btn-icon">â¹ï¸</span>
                                åœæ­¢ç›´æ’­
                            </button>
                            <button class="action-btn secondary" @click="refreshStreamInfo">
                                <span class="btn-icon">ğŸ”„</span>
                                åˆ·æ–°æ¨æµä¿¡æ¯
                            </button>
                        </div>
                    </div>
                </div>
            </main>

            <!-- çŠ¶æ€æ  -->
            <div class="status-bar">
                <div class="status-content">
                    <span class="status-icon">ğŸ“Š</span>
                    <span class="status-text">{{ statusMessage }}</span>
                </div>
                <div class="status-actions">
                    <button class="nav-btn small" @click="startTutorial">
                        <span class="nav-btn-icon">ğŸ“</span>
                        æ•™ç¨‹
                    </button>
                    <button class="nav-btn small" @click="resetTutorial" title="é‡ç½®æ•™ç¨‹çŠ¶æ€">
                        <span class="nav-btn-icon">ğŸ”„</span>
                        é‡ç½®
                    </button>
                </div>
            </div>

            <!-- æ™ºèƒ½æç¤º -->
            <div v-if="showSmartTip" class="smart-tip">
                <span class="tip-icon">ğŸ’¡</span>
                <span class="tip-text">{{ currentTip }}</span>
                <button class="tip-close" @click="showSmartTip = false">Ã—</button>
            </div>
        </div>

        <!-- äºŒç»´ç å¯¹è¯æ¡† -->
        <el-dialog v-model="showQRCode" title="æ‰«ç ç™»å½•" width="30%" class="qr-dialog">
            <div class="qr-container">
                <canvas ref="qrcodeCanvas" v-if="qrcodeUrl" class="qr-canvas"></canvas>
                <p class="qr-tip">è¯·ä½¿ç”¨æŠ–éŸ³APPæ‰«æäºŒç»´ç ç™»å½•</p>
                <div class="qr-steps">
                    <div class="step">
                        <span class="step-number">1</span>
                        <span>æ‰“å¼€æŠ–éŸ³APP</span>
                    </div>
                    <div class="step">
                        <span class="step-number">2</span>
                        <span>ç‚¹å‡»å³ä¸Šè§’"+"å·</span>
                    </div>
                    <div class="step">
                        <span class="step-number">3</span>
                        <span>é€‰æ‹©"æ‰«ä¸€æ‰«"</span>
                    </div>
                    <div class="step">
                        <span class="step-number">4</span>
                        <span>æ‰«æä¸Šæ–¹äºŒç»´ç </span>
                    </div>
                </div>
            </div>
        </el-dialog>

        <!-- å¸®åŠ©å¯¹è¯æ¡† -->
        <el-dialog v-model="showHelpDialog" title="ä½¿ç”¨è¯´æ˜" width="640px" class="help-dialog" :lock-scroll="false" :auto-focus="false">
            <div class="help-content">
                <pre>{{ helpContent }}</pre>
            </div>
        </el-dialog>

        <!-- æ–°æ‰‹å¼•å¯¼é®ç½© -->
        <div v-if="showTutorial" class="tutorial-overlay" @click="closeTutorial">
            <div class="tutorial-content" @click.stop>
                <div class="tutorial-step" v-if="tutorialStep === 1">
                    <h3>æ¬¢è¿ä½¿ç”¨æŠ–éŸ³ç›´æ’­æ¨æµå·¥å…·ï¼</h3>
                    <p>è®©æˆ‘æ¥å¸®ä½ å¿«é€Ÿä¸Šæ‰‹è¿™ä¸ªå·¥å…·</p>
                    <button class="action-btn primary" @click="nextTutorialStep">å¼€å§‹æ•™ç¨‹</button>
                </div>
                <div class="tutorial-step" v-if="tutorialStep === 2">
                    <h3>ç¬¬ä¸€æ­¥ï¼šè´¦å·è®¾ç½®</h3>
                    <p>é¦–å…ˆéœ€è¦è®¾ç½®ä½ çš„æŠ–éŸ³è´¦å·ä¿¡æ¯ï¼Œæ”¯æŒå¤šç§ç™»å½•æ–¹å¼</p>
                    <div class="tutorial-highlight" style="top: 120px; left: 50%; transform: translateX(-50%);">
                        <div class="highlight-arrow"></div>
                    </div>
                    <button class="action-btn primary" @click="nextTutorialStep">ä¸‹ä¸€æ­¥</button>
                </div>
                <div class="tutorial-step" v-if="tutorialStep === 3">
                    <h3>ç¬¬äºŒæ­¥ï¼šç›´æ’­è®¾ç½®</h3>
                    <p>è®¾ç½®ç›´æ’­æ ‡é¢˜ã€åˆ†ç±»å’Œäº’åŠ¨åŠŸèƒ½</p>
                    <button class="action-btn primary" @click="nextTutorialStep">ä¸‹ä¸€æ­¥</button>
                </div>
                <div class="tutorial-step" v-if="tutorialStep === 4">
                    <h3>ç¬¬ä¸‰æ­¥ï¼šå¼€å§‹ç›´æ’­</h3>
                    <p>è·å–æ¨æµä¿¡æ¯å¹¶å¼€å§‹ç›´æ’­</p>
                    <button class="action-btn primary" @click="finishTutorial">å®Œæˆæ•™ç¨‹</button>
                </div>
            </div>
        </div>

        <!-- å¿«æ·æ“ä½œé¢æ¿ -->
        <div class="quick-actions" v-if="showQuickActions">
            <div class="quick-action-item" @click="quickAction('copyStreamInfo')">
                <span class="action-icon">ğŸ“‹</span>
                <span>å¤åˆ¶æ¨æµä¿¡æ¯</span>
            </div>
            <div class="quick-action-item" @click="quickAction('exportInfo')">
                <span class="action-icon">ğŸ’¾</span>
                <span>å¯¼å‡ºé…ç½®</span>
            </div>
            <div class="quick-action-item" @click="quickAction('refreshData')">
                <span class="action-icon">ğŸ”„</span>
                <span>åˆ·æ–°æ•°æ®</span>
            </div>
        </div>
    </div>
</template>

<script setup>
import { ref, onMounted, onUnmounted, computed, watch } from 'vue';
import axios from 'axios';
import QRCode from 'qrcode';
import { useRouter } from 'vue-router';

// API åŸºç¡€ URL
const API_BASE = 'http://localhost:9702/api';

// æ ‡ç­¾é¡µç®¡ç†
const tabs = [
    { 
        id: 'account', 
        name: 'è´¦å·è®¾ç½®', 
        icon: 'ğŸ”',
        description: 'è´¦å·ç™»å½•ä¸è®¤è¯'
    },
    { 
        id: 'live', 
        name: 'ç›´æ’­è®¾ç½®', 
        icon: 'ğŸ“¡',
        description: 'ç›´æ’­é…ç½®ä¸ç®¡ç†'
    },
    { 
        id: 'stream', 
        name: 'æ¨æµä¿¡æ¯', 
        icon: 'ğŸ“Š',
        description: 'æ¨æµç è·å–ä¸å¯¼å‡º'
    }
];
const currentTab = ref('account');

// çŠ¶æ€å’Œæ—¥å¿—
const statusMessage = ref('å°±ç»ª');
const logs = ref([]);

// è´¦å·ä¿¡æ¯
const accountInfo = ref({
    room_id: '',
    cookie_str: '',
    session_id: ''
});
const autoGetLoading = ref(false);

// ç›´æ’­è®¾ç½®
const liveSettings = ref({
    live_title: 'æˆ‘çš„æŠ–éŸ³ç›´æ’­',
    selected_category: '',
    selected_sub_category: ''
});
const categoryData = ref({});
const mainCategories = computed(() => Object.keys(categoryData.value));
const subCategories = ref([]);
const commentMessage = ref('');

// æ¨æµä¿¡æ¯
const streamInfo = ref({
    server: '',
    code: ''
});
const isLiveActive = ref(false);
const router = useRouter();

// äºŒç»´ç ç›¸å…³
const qrcodeUrl = ref('');
const qrcodeCanvas = ref(null);
const showQRCode = ref(false);

// å¸®åŠ©å¯¹è¯æ¡†
const showHelpDialog = ref(false);
const helpContent = `
ã€æŠ–éŸ³ç›´æ’­æ¨æµå·¥å…·ä½¿ç”¨è¯´æ˜ã€‘\n\n1. è´¦å·è®¾ç½®ï¼š\n- æ”¯æŒCookiesæ–‡ä»¶å¯¼å…¥ã€è‡ªåŠ¨æ‰«ç è·å–ã€æ‰‹åŠ¨è¾“å…¥ä¸‰ç§æ–¹å¼ã€‚\n- å»ºè®®ä¼˜å…ˆä½¿ç”¨è‡ªåŠ¨æ‰«ç ï¼Œå®‰å…¨ä¾¿æ·ã€‚\n\n2. ç›´æ’­è®¾ç½®ï¼š\n- å¯è®¾ç½®ç›´æ’­æ ‡é¢˜ã€åˆ†ç±»ã€å­åˆ†ç±»ã€‚\n- æ”¯æŒä¸€é”®å‘é€è¯„è®ºã€å¼€å§‹ç›´æ’­ã€‚\n\n3. æ¨æµä¿¡æ¯ï¼š\n- è·å–æ¨æµåœ°å€å’Œæ¨æµå¯†é’¥ã€‚\n- æ”¯æŒä¸€é”®å¤åˆ¶å’Œå¯¼å‡ºåŠŸèƒ½ã€‚\n\n4. å¸¸è§é—®é¢˜ï¼š\n- è‹¥åˆ†ç±»/å­åˆ†ç±»æ— æ³•é€‰æ‹©ï¼Œè¯·å…ˆåˆ·æ–°åˆ†ç±»ã€‚\n- è‹¥æ¨æµä¿¡æ¯è·å–å¤±è´¥ï¼Œè¯·æ£€æŸ¥Cookiesæˆ–è´¦å·çŠ¶æ€ã€‚\n\n5. æŠ€æœ¯æ”¯æŒï¼š\nå¦‚é‡åˆ°æ— æ³•è§£å†³çš„é—®é¢˜ï¼Œè¯·è”ç³»å¼€å‘å›¢é˜Ÿæˆ–æŸ¥é˜…é¡¹ç›®æ–‡æ¡£ã€‚\n`;

// æ–°æ‰‹å¼•å¯¼ç›¸å…³
const showTutorial = ref(false);
const tutorialStep = ref(1);
const hasShownTutorial = ref(localStorage.getItem('douyin_tutorial_shown') === 'true');

// è°ƒè¯•æ•™ç¨‹çŠ¶æ€
console.log('æ•™ç¨‹çŠ¶æ€:', {
    hasShownTutorial: hasShownTutorial.value,
    showTutorial: showTutorial.value,
    tutorialStep: tutorialStep.value
});

// å¿«æ·æ“ä½œé¢æ¿
const showQuickActions = ref(false);

// æ™ºèƒ½æç¤ºç³»ç»Ÿ
const smartTips = ref([]);
const showSmartTip = ref(false);
const currentTip = ref('');

// æ“ä½œå†å²
const operationHistory = ref([]);
const maxHistoryLength = 10;

// æ—¥å¿—å‡½æ•°
function addLog(message, type = 'info') {
    const timestamp = new Date();
    const logEntry = {
        message,
        type,
        timestamp,
        timeString: timestamp.toLocaleTimeString()
    };
    
    // é™åˆ¶æ—¥å¿—æ•°é‡ä»¥æé«˜æ€§èƒ½
    if (logs.value.length >= 50) {
        logs.value = logs.value.slice(0, 40);
    }
    logs.value.unshift(logEntry);
    statusMessage.value = message;
    
    // æ·»åŠ åˆ°æ“ä½œå†å²
    addToHistory(message, type);
    
    // æ™ºèƒ½æç¤º
    checkSmartTip(message, type);
    
    console.log(`[${type.toUpperCase()}] ${message}`);
}

// æ·»åŠ åˆ°æ“ä½œå†å²
function addToHistory(message, type) {
    const historyEntry = {
        message,
        type,
        timestamp: new Date(),
        tab: currentTab.value
    };
    
    operationHistory.value.unshift(historyEntry);
    if (operationHistory.value.length > maxHistoryLength) {
        operationHistory.value = operationHistory.value.slice(0, maxHistoryLength);
    }
}

// æ™ºèƒ½æç¤ºæ£€æŸ¥
function checkSmartTip(message, type) {
    const tips = {
        'error': [
            'é‡åˆ°é”™è¯¯ï¼Ÿè¯•è¯•åˆ·æ–°é¡µé¢æˆ–é‡æ–°ç™»å½•',
            'æ£€æŸ¥ç½‘ç»œè¿æ¥æ˜¯å¦æ­£å¸¸',
            'ç¡®è®¤è´¦å·ä¿¡æ¯æ˜¯å¦æ­£ç¡®'
        ],
        'success': [
            'æ“ä½œæˆåŠŸï¼å¯ä»¥ç»§ç»­ä¸‹ä¸€æ­¥',
            'æ¨æµä¿¡æ¯å·²è·å–ï¼Œå¯ä»¥å¼€å§‹ç›´æ’­äº†'
        ],
        'warning': [
            'å»ºè®®å…ˆå®Œæˆè´¦å·è®¾ç½®',
            'è¯·ç¡®ä¿é€‰æ‹©äº†æ­£ç¡®çš„ç›´æ’­åˆ†ç±»'
        ]
    };
    
    if (tips[type] && Math.random() < 0.3) { // 30%æ¦‚ç‡æ˜¾ç¤ºæç¤º
        currentTip.value = tips[type][Math.floor(Math.random() * tips[type].length)];
        showSmartTip.value = true;
        setTimeout(() => {
            showSmartTip.value = false;
        }, 4000);
    }
}

// è´¦å·è®¾ç½®ç›¸å…³å‡½æ•°
async function loadCookiesFile() {
    try {
        const response = await axios.get(`${API_BASE}/account`);
        if (response.data.success) {
            accountInfo.value = response.data.data;
            addLog('æˆåŠŸåŠ è½½Cookiesæ–‡ä»¶', 'success');
            currentTab.value = 'live';
        }
    } catch (error) {
        addLog(`åŠ è½½Cookiesæ–‡ä»¶å¤±è´¥: ${error.response?.data?.message || error.message}`, 'error');
    }
}

async function generateQRCode() {
    try {
        const response = await axios.get(`${API_BASE}/qrcode`);
        if (response.data.success) {
            qrcodeUrl.value = response.data.data.url;
            QRCode.toCanvas(qrcodeCanvas.value, qrcodeUrl.value, { width: 200 });
        }
    } catch (error) {
        addLog(`è·å–äºŒç»´ç å¤±è´¥: ${error.message}`, 'error');
    }
}

async function autoGetAccount() {
    autoGetLoading.value = true;

    // æ£€æŸ¥æ˜¯å¦å·²æœ‰cookies
    if (!accountInfo.value.cookie_str) {
        showQRCode.value = true;
        await generateQRCode();
    }

    try {
        const response = await axios.get(`${API_BASE}/account/auto`);
        if (response.data.success) {
            accountInfo.value.room_id = response.data.data.room_id;
            // æ•æ„Ÿä¿¡æ¯ä¸ç›´æ¥æ˜¾ç¤ºï¼Œä½†å·²ä¿å­˜åˆ°æœåŠ¡å™¨
            addLog('è´¦å·ä¿¡æ¯è·å–æˆåŠŸ', 'success');
            currentTab.value = 'live';
        }
    } catch (error) {
        addLog(`è·å–è´¦å·ä¿¡æ¯å¤±è´¥: ${error.response?.data?.message || error.message}`, 'error');
    } finally {
        autoGetLoading.value = false;
    }
}

async function saveAccountSettings() {
    if (!accountInfo.value.room_id || !accountInfo.value.cookie_str || !accountInfo.value.session_id) {
        addLog('è¯·å¡«å†™æ‰€æœ‰è´¦å·ä¿¡æ¯å­—æ®µ', 'warning');
        return;
    }

    try {
        const response = await axios.post(`${API_BASE}/account`, accountInfo.value);
        if (response.data.success) {
            addLog('è´¦å·ä¿¡æ¯ä¿å­˜æˆåŠŸ', 'success');
            currentTab.value = 'live';
        }
    } catch (error) {
        addLog(`ä¿å­˜è´¦å·ä¿¡æ¯å¤±è´¥: ${error.response?.data?.message || error.message}`, 'error');
    }
}

// ç›´æ’­è®¾ç½®ç›¸å…³å‡½æ•°
function updateSubCategories() {
    const category = liveSettings.value.selected_category;
    if (category && categoryData.value[category]) {
        subCategories.value = Object.values(categoryData.value[category]);
        if (subCategories.value.length > 0) {
            liveSettings.value.selected_sub_category = subCategories.value[0];
        }
    } else {
        subCategories.value = [];
    }
}

async function loadCategoryData() {
    try {
        const response = await axios.get(`${API_BASE}/categories`);
        if (response.data.success) {
            categoryData.value = response.data.data;
            updateSubCategories();
            addLog('åˆ†ç±»æ•°æ®åŠ è½½æˆåŠŸ', 'success');
        }
    } catch (error) {
        addLog(`åŠ è½½åˆ†ç±»æ•°æ®å¤±è´¥: ${error.response?.data?.message || error.message}`, 'error');
    }
}

async function refreshCategories() {
    addLog('æ­£åœ¨è·å–ç›´æ’­åˆ†ç±»...');
    try {
        const response = await axios.post(`${API_BASE}/categories/refresh`);
        if (response.data.success) {
            categoryData.value = response.data.data;
            updateSubCategories();
            addLog('ç›´æ’­åˆ†ç±»è·å–æˆåŠŸ', 'success');
        }
    } catch (error) {
        addLog(`è·å–ç›´æ’­åˆ†ç±»å¤±è´¥: ${error.response?.data?.message || error.message}`, 'error');
    }
}

async function updateTitle() {
    if (!liveSettings.value.live_title) {
        addLog('è¯·å¡«å†™ç›´æ’­æ ‡é¢˜', 'warning');
        return;
    }

    addLog('æ­£åœ¨æ›´æ–°ç›´æ’­æ ‡é¢˜...');
    try {
        const response = await axios.post(`${API_BASE}/title/update`, {
            title: liveSettings.value.live_title
        });
        if (response.data.success) {
            addLog('ç›´æ’­æ ‡é¢˜å·²æ›´æ–°', 'success');
        }
    } catch (error) {
        addLog(`æ›´æ–°ç›´æ’­æ ‡é¢˜å¤±è´¥: ${error.response?.data?.message || error.message}`, 'error');
    }
}

async function updateCategory() {
    if (!liveSettings.value.selected_category || !liveSettings.value.selected_sub_category) {
        addLog('è¯·é€‰æ‹©ç›´æ’­åˆ†ç±»', 'warning');
        return;
    }

    addLog('æ­£åœ¨æ›´æ–°ç›´æ’­åˆ†ç±»...');
    try {
        const response = await axios.post(`${API_BASE}/category/update`, {
            main_category: liveSettings.value.selected_category,
            sub_category: liveSettings.value.selected_sub_category
        });
        if (response.data.success) {
            addLog('ç›´æ’­åˆ†ç±»å·²æ›´æ–°', 'success');
        }
    } catch (error) {
        addLog(`æ›´æ–°ç›´æ’­åˆ†ç±»å¤±è´¥: ${error.response?.data?.message || error.message}`, 'error');
    }
}

async function sendComment() {
    if (!commentMessage.value.trim()) {
        addLog('è¯·è¾“å…¥è¯„è®ºå†…å®¹', 'warning');
        return;
    }

    try {
        const response = await axios.post(`${API_BASE}/comment/send`, {
            message: commentMessage.value
        });
        if (response.data.success) {
            addLog(`è¯„è®ºå‘é€æˆåŠŸ: ${commentMessage.value}`, 'success');
            commentMessage.value = ''; // æ¸…ç©ºè¾“å…¥
        }
    } catch (error) {
        addLog(`å‘é€è¯„è®ºå¤±è´¥: ${error.response?.data?.message || error.message}`, 'error');
    }
}

const startLiveAndRedirect = async () => {
    await startLive();
    router.push('/mainPage');
};

async function startLive() {
    if (!liveSettings.value.live_title) {
        addLog('è¯·è®¾ç½®ç›´æ’­æ ‡é¢˜', 'warning');
        return;
    }

    if (!liveSettings.value.selected_category || !liveSettings.value.selected_sub_category) {
        addLog('è¯·é€‰æ‹©ç›´æ’­åˆ†ç±»', 'warning');
        return;
    }

    if (isLiveActive.value) {
        addLog('æ­£åœ¨è¿›è¡Œç›´æ’­ï¼', 'warning');
        return;
    }

    addLog('æ­£åœ¨å¼€å§‹ç›´æ’­...');
    try {
        const response = await axios.post(`${API_BASE}/live/start`, {
            title: liveSettings.value.live_title,
            main_category: liveSettings.value.selected_category,
            sub_category: liveSettings.value.selected_sub_category
        });

        if (response.data.success) {
            streamInfo.value.server = response.data.data.server;
            streamInfo.value.code = response.data.data.code;
            addLog('ç›´æ’­å·²å¼€å¯ï¼è¯·ä½¿ç”¨æ¨æµä¿¡æ¯è¿›è¡Œç›´æ’­', 'success');
            isLiveActive.value = true;
            currentTab.value = 'stream';

            // è‡ªåŠ¨å¡«å……æ¨æµä¿¡æ¯åˆ°streamConfig.vue
            console.log('Sending stream info to parent:', response.data.data.server, response.data.data.code);
            window.parent.postMessage({
                type: 'updateStreamInfo',
                server: response.data.data.server,
                code: response.data.data.code
            }, '*');
        }
    } catch (error) {
        addLog(`å¼€å§‹ç›´æ’­å¤±è´¥: ${error.response?.data?.message || error.message}`, 'error');
    }
}

// æ¨æµä¿¡æ¯ç›¸å…³å‡½æ•°
async function stopLive() {
    if (!isLiveActive.value) {
        addLog('æ²¡æœ‰æ­£åœ¨è¿›è¡Œçš„ç›´æ’­ï¼', 'warning');
        return;
    }

    addLog('æ­£åœ¨åœæ­¢ç›´æ’­...');
    try {
        const response = await axios.post(`${API_BASE}/live/stop`);
        if (response.data.success) {
            streamInfo.value.server = '';
            streamInfo.value.code = '';
            addLog('ç›´æ’­å·²åœæ­¢ï¼', 'success');
            isLiveActive.value = false;
            currentTab.value = 'live';
        }
    } catch (error) {
        addLog(`åœæ­¢ç›´æ’­å¤±è´¥: ${error.response?.data?.message || error.message}`, 'error');
    }
}

function copyServer() {
    if (streamInfo.value.server) {
        navigator.clipboard.writeText(streamInfo.value.server);
        addLog('å·²å¤åˆ¶æ¨æµåœ°å€åˆ°å‰ªè´´æ¿', 'success');
    }
}

function copyCode() {
    if (streamInfo.value.code) {
        navigator.clipboard.writeText(streamInfo.value.code);
        addLog('å·²å¤åˆ¶æ¨æµå¯†é’¥åˆ°å‰ªè´´æ¿', 'success');
    }
}

function exportToDesktop() {
    if (!streamInfo.value.server || !streamInfo.value.code) {
        addLog('æ²¡æœ‰å¯å¯¼å‡ºçš„æ¨æµä¿¡æ¯ï¼', 'warning');
        return;
    }

    downloadStreamInfo('æ¡Œé¢');
}

function exportToFile() {
    if (!streamInfo.value.server || !streamInfo.value.code) {
        addLog('æ²¡æœ‰å¯å¯¼å‡ºçš„æ¨æµä¿¡æ¯ï¼', 'warning');
        return;
    }

    downloadStreamInfo('æ–‡ä»¶');
}

function downloadStreamInfo(type) {
    const url = `${API_BASE}/export?server=${encodeURIComponent(streamInfo.value.server)}&code=${encodeURIComponent(streamInfo.value.code)}`;

    // åˆ›å»ºä¸€ä¸ªéšè—çš„ a æ ‡ç­¾å¹¶è§¦å‘ä¸‹è½½
    const a = document.createElement('a');
    a.style.display = 'none';
    a.href = url;
    a.download = 'douyin_stream_info.txt';
    document.body.appendChild(a);
    a.click();
    document.body.removeChild(a);

    addLog(`æ¨æµä¿¡æ¯å·²å¯¼å‡ºåˆ°${type}`, 'success');
}

async function refreshStreamInfo() {
    try {
        const response = await axios.get(`${API_BASE}/stream/info`);
        if (response.data.success) {
            streamInfo.value = response.data.data;
            addLog('æ¨æµä¿¡æ¯å·²åˆ·æ–°', 'success');
        }
    } catch (error) {
        addLog(`åˆ·æ–°æ¨æµä¿¡æ¯å¤±è´¥: ${error.response?.data?.message || error.message}`, 'error');
    }
}

function showHelp() {
    showHelpDialog.value = true;
}

// æ–°æ‰‹å¼•å¯¼ç›¸å…³å‡½æ•°
function startTutorial() {
    console.log('å¼€å§‹æ•™ç¨‹');
    showTutorial.value = true;
    tutorialStep.value = 1;
    addLog('æ•™ç¨‹å·²å¼€å§‹', 'info');
}

function nextTutorialStep() {
    console.log('ä¸‹ä¸€æ­¥æ•™ç¨‹ï¼Œå½“å‰æ­¥éª¤:', tutorialStep.value);
    tutorialStep.value++;
    if (tutorialStep.value > 4) {
        finishTutorial();
    }
}

function closeTutorial() {
    console.log('å…³é—­æ•™ç¨‹');
    showTutorial.value = false;
    addLog('æ•™ç¨‹å·²å…³é—­', 'info');
}

function finishTutorial() {
    console.log('å®Œæˆæ•™ç¨‹');
    showTutorial.value = false;
    localStorage.setItem('douyin_tutorial_shown', 'true');
    hasShownTutorial.value = true;
    addLog('æ–°æ‰‹å¼•å¯¼å·²å®Œæˆ', 'success');
}

function resetTutorial() {
    console.log('é‡ç½®æ•™ç¨‹çŠ¶æ€');
    localStorage.removeItem('douyin_tutorial_shown');
    hasShownTutorial.value = false;
    showTutorial.value = false;
    tutorialStep.value = 1;
    addLog('æ•™ç¨‹çŠ¶æ€å·²é‡ç½®ï¼Œä¸‹æ¬¡è®¿é—®å°†æ˜¾ç¤ºæ•™ç¨‹', 'info');
}

// å¿«æ·æ“ä½œ
function quickAction(action) {
    switch (action) {
        case 'copyStreamInfo':
            if (streamInfo.value.server && streamInfo.value.code) {
                const info = `æ¨æµåœ°å€: ${streamInfo.value.server}\næ¨æµå¯†é’¥: ${streamInfo.value.code}`;
                navigator.clipboard.writeText(info);
                addLog('æ¨æµä¿¡æ¯å·²å¤åˆ¶åˆ°å‰ªè´´æ¿', 'success');
            } else {
                addLog('æ²¡æœ‰å¯å¤åˆ¶çš„æ¨æµä¿¡æ¯', 'warning');
            }
            break;
        case 'exportInfo':
            exportToFile();
            break;
        case 'refreshData':
            refreshCategories();
            refreshStreamInfo();
            addLog('æ•°æ®å·²åˆ·æ–°', 'success');
            break;
    }
    showQuickActions.value = false;
}

// é”®ç›˜å¿«æ·é”®
function handleKeydown(event) {
    // Ctrl/Cmd + K æ˜¾ç¤ºå¿«æ·æ“ä½œ
    if ((event.ctrlKey || event.metaKey) && event.key === 'k') {
        event.preventDefault();
        showQuickActions.value = !showQuickActions.value;
    }
    
    // Ctrl/Cmd + H æ˜¾ç¤ºå¸®åŠ©
    if ((event.ctrlKey || event.metaKey) && event.key === 'h') {
        event.preventDefault();
        showHelp();
    }
    
    // Ctrl/Cmd + R åˆ·æ–°æ•°æ®
    if ((event.ctrlKey || event.metaKey) && event.key === 'r') {
        event.preventDefault();
        quickAction('refreshData');
    }
}

// åˆå§‹åŒ–
async function loadSettings() {
    try {
        const response = await axios.get(`${API_BASE}/settings`);
        if (response.data.success) {
            liveSettings.value = response.data.data;
        }
    } catch (error) {
        addLog(`åŠ è½½è®¾ç½®å¤±è´¥: ${error.response?.data?.message || error.message}`, 'error');
    }
}

async function loadLogs() {
    try {
        const response = await axios.get(`${API_BASE}/logs`);
        if (response.data.success) {
            logs.value = response.data.data;
        }
    } catch (error) {
        console.error('åŠ è½½æ—¥å¿—å¤±è´¥:', error);
        addLog('åŠ è½½å†å²æ—¥å¿—å¤±è´¥', 'error');
    }
}

// ç›‘å¬æ ‡ç­¾é¡µå˜åŒ–
watch(currentTab, async (newTab) => {
    if (newTab === 'live') {
        await loadCategoryData();
    } else if (newTab === 'stream' && !isLiveActive.value) {
        // å¦‚æœåˆ‡æ¢åˆ°æ¨æµä¿¡æ¯é¡µï¼Œä½†æ²¡æœ‰ç›´æ’­ï¼Œåˆ™åˆ‡å›ç›´æ’­è®¾ç½®é¡µ
        setTimeout(() => {
            if (!isLiveActive.value) {
                currentTab.value = 'live';
            }
        }, 100);
    }
});

// ç»„ä»¶æŒ‚è½½æ—¶æ‰§è¡Œ
onMounted(async () => {
    addLog('æŠ–éŸ³ç›´æ’­æ¨æµå·¥å…·å·²åˆå§‹åŒ–', 'success');
    await loadSettings();
    await loadCategoryData();
    await loadLogs();

    // æ¯30ç§’åˆ·æ–°ä¸€æ¬¡æ—¥å¿—
    setInterval(loadLogs, 30000);
    
    // æ·»åŠ é”®ç›˜äº‹ä»¶ç›‘å¬
    document.addEventListener('keydown', handleKeydown);
    
    // æ£€æŸ¥æ˜¯å¦éœ€è¦æ˜¾ç¤ºæ–°æ‰‹å¼•å¯¼
    if (!hasShownTutorial.value) {
        console.log('é¦–æ¬¡è®¿é—®ï¼Œå‡†å¤‡æ˜¾ç¤ºæ•™ç¨‹');
        setTimeout(() => {
            startTutorial();
        }, 2000); // å¢åŠ å»¶è¿Ÿï¼Œç¡®ä¿é¡µé¢å®Œå…¨åŠ è½½
    } else {
        console.log('ç”¨æˆ·å·²å®Œæˆæ•™ç¨‹');
    }
    
    // æ˜¾ç¤ºå¿«æ·é”®æç¤º
    setTimeout(() => {
        addLog('ğŸ’¡ æç¤ºï¼šæŒ‰ Ctrl+K æ‰“å¼€å¿«æ·æ“ä½œé¢æ¿', 'info');
    }, 3000);
});

// è·å–æ—¥å¿—å›¾æ ‡
function getLogIcon(type) {
    const icons = {
        'success': 'âœ…',
        'error': 'âŒ',
        'warning': 'âš ï¸',
        'info': 'â„¹ï¸'
    };
    return icons[type] || 'â„¹ï¸';
}

// æ¸…ç©ºæ—¥å¿—
function clearLogs() {
    logs.value = [];
    addLog('æ—¥å¿—å·²æ¸…ç©º', 'info');
}

// å¯¼å‡ºæ—¥å¿—
function exportLogs() {
    const logText = logs.value.map(log => 
        `[${log.timeString}] [${log.type.toUpperCase()}] ${log.message}`
    ).join('\n');
    
    const blob = new Blob([logText], { type: 'text/plain' });
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url;
    a.download = `douyin_logs_${new Date().toISOString().split('T')[0]}.txt`;
    a.click();
    URL.revokeObjectURL(url);
    
    addLog('æ—¥å¿—å·²å¯¼å‡º', 'success');
}

// ç»„ä»¶å¸è½½æ—¶æ¸…ç†
onUnmounted(() => {
    document.removeEventListener('keydown', handleKeydown);
});
</script>

<style scoped>
/* å…¨å±€æ ·å¼ */
* {
    box-sizing: border-box;
}

/* é¡µé¢å®¹å™¨ */
.page-container {
    min-height: 100vh;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    font-family: 'Microsoft YaHei', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    position: relative;
    overflow-x: hidden;
}

/* èƒŒæ™¯è£…é¥° */
.bg-decoration {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    pointer-events: none;
    z-index: 0;
}

.floating-shape {
    position: absolute;
    border-radius: 50%;
    background: rgba(255, 255, 255, 0.1);
    animation: float 6s ease-in-out infinite;
}

.shape-1 {
    width: 100px;
    height: 100px;
    top: 10%;
    left: 10%;
    animation-delay: 0s;
}

.shape-2 {
    width: 150px;
    height: 150px;
    top: 60%;
    right: 15%;
    animation-delay: 2s;
}

.shape-3 {
    width: 80px;
    height: 80px;
    bottom: 20%;
    left: 20%;
    animation-delay: 4s;
}

.shape-4 {
    width: 120px;
    height: 120px;
    top: 30%;
    right: 30%;
    animation-delay: 1s;
}

@keyframes float {
    0%, 100% { transform: translateY(0px) rotate(0deg); }
    50% { transform: translateY(-20px) rotate(180deg); }
}

/* ä¸»å®¹å™¨ */
.main-container {
    position: relative;
    z-index: 1;
    max-width: 1400px;
    margin: 0 auto;
    background: rgba(255, 255, 255, 0.95);
    border-radius: 24px;
    box-shadow: 0 25px 50px rgba(0, 0, 0, 0.15);
    backdrop-filter: blur(20px);
    overflow: hidden;
    margin-top: 20px;
    margin-bottom: 20px;
}

/* é¡¶éƒ¨å¯¼èˆªæ  */
.top-nav {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 20px 30px;
    background: linear-gradient(135deg, #fe2c55 0%, #ff6b9d 100%);
    color: white;
    position: relative;
    overflow: hidden;
}

.top-nav::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><pattern id="grain" width="100" height="100" patternUnits="userSpaceOnUse"><circle cx="25" cy="25" r="1" fill="white" opacity="0.1"/><circle cx="75" cy="75" r="1" fill="white" opacity="0.1"/><circle cx="50" cy="10" r="0.5" fill="white" opacity="0.1"/><circle cx="10" cy="60" r="0.5" fill="white" opacity="0.1"/><circle cx="90" cy="40" r="0.5" fill="white" opacity="0.1"/></pattern></defs><rect width="100" height="100" fill="url(%23grain)"/></svg>');
    opacity: 0.3;
}

.nav-brand {
    display: flex;
    align-items: center;
    gap: 15px;
    position: relative;
    z-index: 1;
}

.logo-container {
    display: flex;
    align-items: center;
    animation: logoFloat 3s ease-in-out infinite;
}

.douyin-logo {
    filter: drop-shadow(0 4px 8px rgba(0, 0, 0, 0.2));
    transition: transform 0.3s ease;
}

.logo-container:hover .douyin-logo {
    transform: scale(1.1);
}

@keyframes logoFloat {
    0%, 100% { transform: translateY(0px); }
    50% { transform: translateY(-5px); }
}

.brand-text {
    display: flex;
    flex-direction: column;
    gap: 4px;
}

.brand-title {
    font-size: 1.8rem;
    font-weight: 700;
    margin: 0;
    line-height: 1.2;
}

.brand-subtitle {
    font-size: 0.9rem;
    opacity: 0.9;
    margin: 0;
    font-weight: 400;
}

.nav-actions {
    display: flex;
    gap: 12px;
    position: relative;
    z-index: 1;
}

.nav-btn {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 10px 16px;
    background: rgba(255, 255, 255, 0.2);
    border: 1px solid rgba(255, 255, 255, 0.3);
    border-radius: 12px;
    color: white;
    font-size: 0.9rem;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.3s ease;
    backdrop-filter: blur(10px);
}

.nav-btn:hover {
    background: rgba(255, 255, 255, 0.3);
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
}

.nav-btn-icon {
    font-size: 1rem;
}

.nav-btn.small {
    padding: 8px 12px;
    font-size: 0.8rem;
}

/* æ ‡ç­¾é¡µå¯¼èˆª */
.tab-navigation {
    background: rgba(255, 255, 255, 0.95);
    backdrop-filter: blur(10px);
    border-bottom: 1px solid rgba(254, 44, 85, 0.2);
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
}

.tab-list {
    display: flex;
    justify-content: center;
    gap: 0;
    max-width: 800px;
    margin: 0 auto;
}

.tab-item {
    flex: 1;
    padding: 20px 15px;
    background: transparent;
    border: none;
    color: #333;
    font-size: 1rem;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
    position: relative;
    display: flex;
    align-items: center;
    justify-content: center;
    min-height: 80px;
}

.tab-content {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 8px;
    text-align: center;
}

.tab-info {
    display: flex;
    flex-direction: column;
    gap: 2px;
}

.tab-name {
    font-weight: 600;
    font-size: 1rem;
    line-height: 1.2;
}

.tab-desc {
    font-size: 0.75rem;
    opacity: 0.8;
    line-height: 1.1;
    font-weight: 400;
}

.tab-item::before {
    content: '';
    position: absolute;
    bottom: 0;
    left: 50%;
    width: 0;
    height: 3px;
    background: #fe2c55;
    transition: all 0.3s ease;
    transform: translateX(-50%);
}

.tab-item:hover {
    color: #fe2c55;
    background: rgba(254, 44, 85, 0.1);
}

.tab-item.active {
    color: white;
    background: linear-gradient(135deg, #fe2c55 0%, #ff6b9d 100%);
    box-shadow: 0 2px 8px rgba(254, 44, 85, 0.3);
}

.tab-item.active::before {
    width: 80%;
    background: white;
}

.tab-icon {
    font-size: 1.4rem;
    transition: transform 0.2s ease;
}

.tab-item:hover .tab-icon {
    transform: scale(1.1);
}

/* ä¸»å†…å®¹åŒºåŸŸ */
.main-content {
    padding: 30px;
    min-height: 600px;
}

.content-panel {
    animation: fadeIn 0.3s ease;
}

@keyframes fadeIn {
    from { opacity: 0; transform: translateY(10px); }
    to { opacity: 1; transform: translateY(0); }
}

.panel-header {
    text-align: center;
    margin-bottom: 40px;
}

.panel-title {
    font-size: 2rem;
    font-weight: 700;
    color: #333;
    margin: 0 0 10px 0;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 12px;
}

.title-icon {
    font-size: 1.8rem;
}

.panel-subtitle {
    font-size: 1.1rem;
    color: #666;
    margin: 0;
    font-weight: 400;
}

/* åŠŸèƒ½å¡ç‰‡ç½‘æ ¼ */
.panel-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 24px;
    margin-bottom: 40px;
}

.feature-card {
    background: white;
    border-radius: 16px;
    padding: 24px;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
    border: 1px solid rgba(0, 0, 0, 0.05);
    transition: all 0.3s ease;
    text-align: center;
}

.feature-card:hover {
    transform: translateY(-4px);
    box-shadow: 0 8px 30px rgba(0, 0, 0, 0.12);
}

.card-header {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 12px;
    margin-bottom: 16px;
}

.card-icon {
    font-size: 2.5rem;
    width: 60px;
    height: 60px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: linear-gradient(135deg, #fe2c55 0%, #ff6b9d 100%);
    border-radius: 50%;
    color: white;
    box-shadow: 0 4px 12px rgba(254, 44, 85, 0.3);
}

.card-header h3 {
    font-size: 1.2rem;
    font-weight: 600;
    color: #333;
    margin: 0;
}

.card-desc {
    color: #666;
    font-size: 0.9rem;
    margin: 0 0 20px 0;
    line-height: 1.5;
}

.card-btn {
    width: 100%;
    padding: 12px 24px;
    border: none;
    border-radius: 12px;
    font-size: 0.95rem;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
}

.card-btn.primary {
    background: linear-gradient(135deg, #fe2c55 0%, #ff6b9d 100%);
    color: white;
}

.card-btn.primary:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 20px rgba(254, 44, 85, 0.4);
}

.card-btn.success {
    background: linear-gradient(135deg, #67c23a 0%, #85ce61 100%);
    color: white;
}

.card-btn.success:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 20px rgba(103, 194, 58, 0.4);
}

.card-btn:disabled {
    opacity: 0.6;
    cursor: not-allowed;
    transform: none !important;
}

.loading-indicator {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
    margin-top: 12px;
    color: #666;
    font-size: 0.9rem;
}

.spinner {
    width: 16px;
    height: 16px;
    border: 2px solid #f3f3f3;
    border-top: 2px solid #fe2c55;
    border-radius: 50%;
    animation: spin 1s linear infinite;
}

@keyframes spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
}

/* è¡¨å•åŒºåŸŸ */
.form-section {
    background: white;
    border-radius: 16px;
    padding: 30px;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
    border: 1px solid rgba(0, 0, 0, 0.05);
}

.section-header {
    margin-bottom: 24px;
}

.section-header h3 {
    font-size: 1.3rem;
    font-weight: 600;
    color: #333;
    margin: 0 0 8px 0;
}

.section-header p {
    color: #666;
    font-size: 0.9rem;
    margin: 0;
    line-height: 1.5;
}

.form-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 20px;
    margin-bottom: 24px;
}

.form-field {
    display: flex;
    flex-direction: column;
    gap: 8px;
}

.field-label {
    font-weight: 600;
    color: #333;
    font-size: 0.9rem;
}

.field-input {
    padding: 12px 16px;
    border: 2px solid #e1e8ed;
    border-radius: 12px;
    font-size: 1rem;
    transition: all 0.3s ease;
    background: #f8f9fa;
}

.field-input:focus {
    outline: none;
    border-color: #fe2c55;
    background: white;
    box-shadow: 0 0 0 3px rgba(254, 44, 85, 0.1);
}

.form-actions {
    display: flex;
    justify-content: center;
    gap: 16px;
}

/* è®¾ç½®åŒºåŸŸ */
.setting-section {
    background: white;
    border-radius: 16px;
    padding: 30px;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
    border: 1px solid rgba(0, 0, 0, 0.05);
    margin-bottom: 24px;
}

.input-group {
    display: flex;
    gap: 12px;
    align-items: flex-end;
}

.modern-input {
    flex: 1;
    padding: 12px 16px;
    border: 2px solid #e1e8ed;
    border-radius: 12px;
    font-size: 1rem;
    transition: all 0.3s ease;
    background: #f8f9fa;
}

.modern-input:focus {
    outline: none;
    border-color: #fe2c55;
    background: white;
    box-shadow: 0 0 0 3px rgba(254, 44, 85, 0.1);
}

.category-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 20px;
    margin-bottom: 20px;
}

.select-group {
    display: flex;
    flex-direction: column;
    gap: 8px;
}

.select-label {
    font-weight: 600;
    color: #333;
    font-size: 0.9rem;
}

.modern-select {
    padding: 12px 16px;
    border: 2px solid #e1e8ed;
    border-radius: 12px;
    font-size: 1rem;
    transition: all 0.3s ease;
    background: #f8f9fa;
    cursor: pointer;
}

.modern-select:focus {
    outline: none;
    border-color: #fe2c55;
    background: white;
    box-shadow: 0 0 0 3px rgba(254, 44, 85, 0.1);
}

.action-group {
    display: flex;
    gap: 12px;
    justify-content: center;
}

/* æŒ‰é’®æ ·å¼ */
.action-btn {
    padding: 12px 24px;
    border: none;
    border-radius: 12px;
    font-size: 0.95rem;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
    text-decoration: none;
    position: relative;
    overflow: hidden;
    min-height: 44px;
    white-space: nowrap;
}

.action-btn::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
    transition: left 0.3s ease;
}

.action-btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
}

.action-btn:hover::before {
    left: 100%;
}

.action-btn:disabled {
    opacity: 0.6;
    cursor: not-allowed;
    transform: none !important;
}

.action-btn.primary {
    background: linear-gradient(135deg, #fe2c55 0%, #ff6b9d 100%);
    color: white;
}

.action-btn.primary:hover {
    background: linear-gradient(135deg, #e6254a 0%, #e55a8a 100%);
}

.action-btn.success {
    background: linear-gradient(135deg, #67c23a 0%, #85ce61 100%);
    color: white;
}

.action-btn.success:hover {
    background: linear-gradient(135deg, #5daf34 0%, #73c25a 100%);
}

.action-btn.secondary {
    background: #f8f9fa;
    color: #666;
    border: 1px solid #ddd;
}

.action-btn.secondary:hover {
    background: #e9ecef;
    color: #333;
}

.action-btn.danger {
    background: linear-gradient(135deg, #f56c6c 0%, #f78989 100%);
    color: white;
}

.action-btn.danger:hover {
    background: linear-gradient(135deg, #e45656 0%, #e57575 100%);
}

.action-btn.small {
    padding: 8px 16px;
    font-size: 0.85rem;
    min-height: 36px;
}

.btn-icon {
    font-size: 1rem;
    transition: transform 0.2s ease;
}

.action-btn:hover .btn-icon {
    transform: scale(1.05);
}

/* ç›´æ’­æ“ä½œ */
.live-action {
    text-align: center;
    margin: 40px 0;
}

.live-btn {
    padding: 20px 40px;
    border: none;
    border-radius: 16px;
    font-size: 1.2rem;
    font-weight: 700;
    cursor: pointer;
    transition: all 0.3s ease;
    display: inline-flex;
    align-items: center;
    gap: 12px;
    background: linear-gradient(135deg, #67c23a 0%, #85ce61 100%);
    color: white;
    box-shadow: 0 8px 25px rgba(103, 194, 58, 0.3);
    animation: pulse 2s infinite;
}

.live-btn:hover {
    transform: translateY(-3px);
    box-shadow: 0 12px 35px rgba(103, 194, 58, 0.4);
}

.live-icon {
    font-size: 1.5rem;
}

.live-text {
    font-size: 1.2rem;
}

@keyframes pulse {
    0% { box-shadow: 0 8px 25px rgba(103, 194, 58, 0.3); }
    50% { box-shadow: 0 8px 25px rgba(103, 194, 58, 0.5); }
    100% { box-shadow: 0 8px 25px rgba(103, 194, 58, 0.3); }
}

/* æ—¥å¿—åŒºåŸŸ */
.log-section {
    background: white;
    border-radius: 16px;
    padding: 30px;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
    border: 1px solid rgba(0, 0, 0, 0.05);
}

.log-section .section-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 20px;
}

.log-actions {
    display: flex;
    gap: 8px;
}

.log-container {
    background: rgba(0, 0, 0, 0.02);
    border-radius: 12px;
    padding: 16px;
    max-height: 300px;
    overflow-y: auto;
    border: 1px solid rgba(0, 0, 0, 0.08);
}

.log-item {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 12px;
    margin-bottom: 8px;
    background: rgba(255, 255, 255, 0.9);
    border-radius: 8px;
    border-left: 4px solid #fe2c55;
    font-size: 0.9rem;
}

.log-time {
    color: #999;
    font-size: 0.8rem;
    min-width: 80px;
    flex-shrink: 0;
}

.log-icon {
    font-size: 1rem;
    flex-shrink: 0;
    width: 20px;
    text-align: center;
}

.log-message {
    color: #333;
    flex: 1;
    word-break: break-word;
}

.log-success {
    border-left-color: #67c23a;
    background: rgba(103, 194, 58, 0.05);
}

.log-error {
    border-left-color: #f56c6c;
    background: rgba(245, 108, 108, 0.05);
}

.log-warning {
    border-left-color: #e6a23c;
    background: rgba(230, 162, 60, 0.05);
}

.log-info {
    border-left-color: #409eff;
    background: rgba(64, 158, 255, 0.05);
}

.empty-log {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 8px;
    padding: 40px 20px;
    color: #999;
    font-style: italic;
}

.empty-icon {
    font-size: 2rem;
    opacity: 0.5;
}

/* æ¨æµä¿¡æ¯åŒºåŸŸ */
.stream-info-section {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 24px;
    margin-bottom: 30px;
}

.info-card {
    background: white;
    border-radius: 16px;
    padding: 24px;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
    border: 1px solid rgba(0, 0, 0, 0.05);
}

.info-card .card-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 16px;
}

.info-card .card-header h3 {
    font-size: 1.1rem;
    font-weight: 600;
    color: #333;
    margin: 0;
}

.copy-btn {
    padding: 8px 12px;
    border: none;
    border-radius: 8px;
    background: #f8f9fa;
    color: #666;
    font-size: 0.8rem;
    cursor: pointer;
    transition: all 0.3s ease;
    display: flex;
    align-items: center;
    gap: 4px;
}

.copy-btn:hover {
    background: #e9ecef;
    color: #333;
}

.info-value {
    background: #f8f9fa;
    padding: 12px 16px;
    border-radius: 8px;
    font-family: 'Courier New', monospace;
    font-size: 0.9rem;
    color: #333;
    word-break: break-all;
    min-height: 44px;
    display: flex;
    align-items: center;
}

.export-section,
.control-section {
    background: white;
    border-radius: 16px;
    padding: 30px;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
    border: 1px solid rgba(0, 0, 0, 0.05);
    margin-bottom: 24px;
}

.export-actions,
.control-actions {
    display: flex;
    gap: 12px;
    justify-content: center;
    flex-wrap: wrap;
}

/* çŠ¶æ€æ  */
.status-bar {
    background: rgba(255, 255, 255, 0.95);
    border-radius: 12px;
    padding: 16px 24px;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06);
    border: 1px solid rgba(255, 255, 255, 0.5);
    margin: 20px 30px 30px 30px;
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.status-content {
    display: flex;
    align-items: center;
    gap: 12px;
}

.status-icon {
    font-size: 1.2rem;
    color: #fe2c55;
    flex-shrink: 0;
}

.status-text {
    color: #333;
    font-weight: 500;
    word-break: break-word;
}

/* åˆ†éš”çº¿ */
.divider {
    height: 1px;
    background: linear-gradient(to right, transparent, #ddd, transparent);
    margin: 30px 0;
}

/* å¸®åŠ©åŒºåŸŸ */
.help-section {
    margin-top: 20px;
    padding-top: 20px;
    border-top: 1px solid #eee;
}

/* æ—¥å¿—åŒºåŸŸ */
.log-area {
    background: rgba(0, 0, 0, 0.03);
    border-radius: 10px;
    padding: 15px;
    max-height: 200px;
    overflow-y: auto;
    border: 1px solid rgba(0, 0, 0, 0.08);
    scroll-behavior: smooth;
}

.log-entry {
    padding: 8px 12px;
    margin-bottom: 8px;
    background: rgba(255, 255, 255, 0.9);
    border-radius: 8px;
    font-size: 0.9rem;
    border-left: 3px solid #fe2c55;
    display: flex;
    align-items: center;
    gap: 10px;
}

.log-time {
    color: #999;
    font-size: 0.8rem;
    min-width: 80px;
    flex-shrink: 0;
}

.log-message {
    color: #333;
    flex: 1;
    word-break: break-word;
}

.no-logs {
    text-align: center;
    color: #999;
    font-style: italic;
    padding: 20px;
}

/* åŠ è½½æ–‡æœ¬ */
.loading-text {
    color: #e6a23c;
    margin-top: 10px;
    font-style: italic;
    text-align: center;
}

/* çŠ¶æ€æ  */
.status-bar {
    background: rgba(255, 255, 255, 0.9);
    border-radius: 10px;
    padding: 15px 20px;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06);
    border: 1px solid rgba(255, 255, 255, 0.5);
    margin: 20px 30px 30px 30px;
}

.status-content {
    display: flex;
    align-items: center;
    gap: 10px;
}

.status-icon {
    font-size: 1.2rem;
    color: #fe2c55;
    flex-shrink: 0;
}

.status-text {
    color: #333;
    font-weight: 500;
    word-break: break-word;
}

/* æ¨æµä¿¡æ¯æ ·å¼ */
.stream-info {
    background: rgba(254, 44, 85, 0.05);
    padding: 20px;
    border-radius: 12px;
    border: 1px solid rgba(254, 44, 85, 0.1);
}

.input-with-copy {
    display: flex;
    gap: 10px;
    align-items: center;
}

.input-with-copy input {
    flex: 1;
}

.copy-btn {
    white-space: nowrap;
    min-width: 80px;
}

.export-buttons {
    display: flex;
    justify-content: flex-end;
    gap: 10px;
    margin-top: 20px;
}

.control-buttons {
    display: flex;
    gap: 15px;
    margin-top: 20px;
}

/* äºŒç»´ç å¯¹è¯æ¡† */
.qr-dialog {
    border-radius: 15px;
}

.qr-container {
    text-align: center;
    padding: 20px;
}

.qr-canvas {
    border: 2px solid #e1e8ed;
    border-radius: 12px;
    margin-bottom: 15px;
}

.qr-tip {
    color: #666;
    font-size: 0.9rem;
    margin: 0;
}

/* å¸®åŠ©å¯¹è¯æ¡† */
.help-dialog {
    border-radius: 15px;
}

.help-content {
    max-height: 400px;
    overflow-y: auto;
    padding: 10px;
}

.help-content pre {
    white-space: pre-wrap;
    font-family: 'Microsoft YaHei', monospace;
    line-height: 1.6;
    color: #333;
    margin: 0;
}

/* æ–°æ‰‹å¼•å¯¼æ ·å¼ */
.tutorial-overlay {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.85);
    z-index: 9999;
    display: flex;
    align-items: center;
    justify-content: center;
    backdrop-filter: blur(8px);
    animation: fadeIn 0.3s ease;
}

.tutorial-content {
    background: white;
    border-radius: 24px;
    padding: 40px;
    max-width: 500px;
    text-align: center;
    box-shadow: 0 25px 50px rgba(0, 0, 0, 0.3);
    position: relative;
    animation: slideIn 0.3s ease;
}

.tutorial-step h3 {
    color: #fe2c55;
    margin-bottom: 15px;
    font-size: 1.5rem;
    font-weight: 700;
}

.tutorial-step p {
    color: #666;
    margin-bottom: 25px;
    line-height: 1.6;
    font-size: 1rem;
}

.tutorial-highlight {
    position: absolute;
    width: 200px;
    height: 100px;
    border: 3px solid #fe2c55;
    border-radius: 12px;
    background: rgba(254, 44, 85, 0.1);
    animation: tutorialPulse 2s infinite;
}

.highlight-arrow {
    position: absolute;
    top: -20px;
    left: 50%;
    transform: translateX(-50%);
    width: 0;
    height: 0;
    border-left: 10px solid transparent;
    border-right: 10px solid transparent;
    border-bottom: 20px solid #fe2c55;
}

@keyframes tutorialPulse {
    0% { 
        box-shadow: 0 0 0 0 rgba(254, 44, 85, 0.7);
        transform: scale(1);
    }
    50% { 
        box-shadow: 0 0 0 10px rgba(254, 44, 85, 0);
        transform: scale(1.05);
    }
    100% { 
        box-shadow: 0 0 0 0 rgba(254, 44, 85, 0);
        transform: scale(1);
    }
}

/* å¿«æ·æ“ä½œé¢æ¿ */
.quick-actions {
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background: white;
    border-radius: 15px;
    padding: 20px;
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
    z-index: 1000;
    animation: slideIn 0.3s ease;
}

.quick-action-item {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 12px 20px;
    cursor: pointer;
    border-radius: 8px;
    transition: all 0.2s ease;
    margin-bottom: 8px;
}

.quick-action-item:hover {
    background: #f8f9fa;
    transform: translateX(5px);
}

.action-icon {
    font-size: 1.2rem;
}

/* æ™ºèƒ½æç¤º */
.smart-tip {
    position: fixed;
    top: 20px;
    right: 20px;
    background: linear-gradient(135deg, #fe2c55 0%, #ff6b9d 100%);
    color: white;
    padding: 15px 20px;
    border-radius: 10px;
    box-shadow: 0 5px 15px rgba(254, 44, 85, 0.3);
    z-index: 1001;
    display: flex;
    align-items: center;
    gap: 10px;
    max-width: 300px;
    animation: slideInRight 0.3s ease;
}

.tip-icon {
    font-size: 1.2rem;
    flex-shrink: 0;
}

.tip-text {
    flex: 1;
    font-size: 0.9rem;
    line-height: 1.4;
}

.tip-close {
    background: none;
    border: none;
    color: white;
    font-size: 1.2rem;
    cursor: pointer;
    padding: 0;
    width: 20px;
    height: 20px;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 50%;
    transition: background 0.2s ease;
}

.tip-close:hover {
    background: rgba(255, 255, 255, 0.2);
}

/* çŠ¶æ€æ å¢å¼º */
.status-bar {
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.status-actions {
    display: flex;
    gap: 10px;
}

.btn.small {
    padding: 8px 16px;
    font-size: 12px;
    min-height: 32px;
}

/* æ—¥å¿—å¢å¼º */
.log-entry {
    display: flex;
    align-items: center;
    gap: 10px;
}

.log-icon {
    font-size: 1rem;
    flex-shrink: 0;
    width: 20px;
    text-align: center;
}

.log-success {
    border-left-color: #67c23a;
    background: rgba(103, 194, 58, 0.05);
}

.log-error {
    border-left-color: #f56c6c;
    background: rgba(245, 108, 108, 0.05);
}

.log-warning {
    border-left-color: #e6a23c;
    background: rgba(230, 162, 60, 0.05);
}

.log-info {
    border-left-color: #409eff;
    background: rgba(64, 158, 255, 0.05);
}

.log-actions {
    display: flex;
    gap: 10px;
    margin-top: 15px;
    justify-content: flex-end;
}

/* äºŒç»´ç æ­¥éª¤ */
.qr-steps {
    margin-top: 20px;
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 10px;
}

.step {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 8px 12px;
    background: rgba(255, 255, 255, 0.1);
    border-radius: 8px;
    font-size: 0.9rem;
}

.step-number {
    background: white;
    color: #fe2c55;
    width: 20px;
    height: 20px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 0.8rem;
    font-weight: bold;
}

/* åŠ¨ç”» */
@keyframes slideIn {
    from {
        opacity: 0;
        transform: translate(-50%, -60%);
    }
    to {
        opacity: 1;
        transform: translate(-50%, -50%);
    }
}

@keyframes slideInRight {
    from {
        opacity: 0;
        transform: translateX(100%);
    }
    to {
        opacity: 1;
        transform: translateX(0);
    }
}

/* æ™ºèƒ½æç¤º */
.smart-tip {
    position: fixed;
    top: 20px;
    right: 20px;
    background: linear-gradient(135deg, #fe2c55 0%, #ff6b9d 100%);
    color: white;
    padding: 16px 20px;
    border-radius: 12px;
    box-shadow: 0 8px 25px rgba(254, 44, 85, 0.3);
    z-index: 1001;
    display: flex;
    align-items: center;
    gap: 12px;
    max-width: 350px;
    animation: slideInRight 0.3s ease;
}

.tip-icon {
    font-size: 1.2rem;
    flex-shrink: 0;
}

.tip-text {
    flex: 1;
    font-size: 0.9rem;
    line-height: 1.4;
}

.tip-close {
    background: none;
    border: none;
    color: white;
    font-size: 1.2rem;
    cursor: pointer;
    padding: 0;
    width: 24px;
    height: 24px;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 50%;
    transition: background 0.2s ease;
}

.tip-close:hover {
    background: rgba(255, 255, 255, 0.2);
}

/* å¿«æ·æ“ä½œé¢æ¿ */
.quick-actions {
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background: white;
    border-radius: 16px;
    padding: 24px;
    box-shadow: 0 15px 40px rgba(0, 0, 0, 0.2);
    z-index: 1000;
    animation: slideIn 0.3s ease;
    min-width: 280px;
}

.quick-action-item {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 12px 16px;
    cursor: pointer;
    border-radius: 8px;
    transition: all 0.2s ease;
    margin-bottom: 8px;
}

.quick-action-item:hover {
    background: #f8f9fa;
    transform: translateX(5px);
}

.action-icon {
    font-size: 1.2rem;
}

/* åŠ¨ç”» */
@keyframes slideIn {
    from {
        opacity: 0;
        transform: translate(-50%, -60%);
    }
    to {
        opacity: 1;
        transform: translate(-50%, -50%);
    }
}

@keyframes slideInRight {
    from {
        opacity: 0;
        transform: translateX(100%);
    }
    to {
        opacity: 1;
        transform: translateX(0);
    }
}

/* å“åº”å¼è®¾è®¡ */
@media (max-width: 1024px) {
    .main-container {
        margin: 10px;
        border-radius: 20px;
    }
    
    .panel-grid {
        grid-template-columns: 1fr;
    }
    
    .stream-info-section {
        grid-template-columns: 1fr;
    }
}

@media (max-width: 768px) {
    .top-nav {
        padding: 15px 20px;
        flex-direction: column;
        gap: 15px;
    }
    
    .nav-brand {
        flex-direction: column;
        text-align: center;
    }
    
    .brand-title {
        font-size: 1.5rem;
    }
    
    .nav-actions {
        width: 100%;
        justify-content: center;
    }
    
    .tab-list {
        flex-direction: column;
        gap: 0;
    }
    
    .tab-item {
        min-height: 70px;
        padding: 15px 10px;
    }
    
    .tab-name {
        font-size: 0.9rem;
    }
    
    .tab-desc {
        font-size: 0.7rem;
    }
    
    .main-content {
        padding: 20px;
    }
    
    .panel-title {
        font-size: 1.6rem;
    }
    
    .input-group {
        flex-direction: column;
        align-items: stretch;
    }
    
    .category-grid {
        grid-template-columns: 1fr;
    }
    
    .action-group {
        flex-direction: column;
    }
    
    .export-actions,
    .control-actions {
        flex-direction: column;
    }
    
    .status-bar {
        flex-direction: column;
        gap: 15px;
        align-items: stretch;
        margin: 15px 20px 20px 20px;
    }
    
    .smart-tip {
        left: 20px;
        right: 20px;
        max-width: none;
    }
    
    .quick-actions {
        width: 90%;
        max-width: 320px;
    }
}

@media (max-width: 480px) {
    .brand-title {
        font-size: 1.3rem;
    }
    
    .brand-subtitle {
        font-size: 0.8rem;
    }
    
    .douyin-logo {
        width: 35px;
        height: 34px;
    }
    
    .panel-title {
        font-size: 1.4rem;
    }
    
    .title-icon {
        font-size: 1.5rem;
    }
    
    .feature-card {
        padding: 20px;
    }
    
    .card-icon {
        width: 50px;
        height: 50px;
        font-size: 2rem;
    }
    
    .setting-section,
    .form-section,
    .log-section,
    .export-section,
    .control-section {
        padding: 20px;
    }
    
    .live-btn {
        padding: 16px 32px;
        font-size: 1.1rem;
    }
    
    .live-icon {
        font-size: 1.3rem;
    }
    
    .live-text {
        font-size: 1.1rem;
    }
}
</style>